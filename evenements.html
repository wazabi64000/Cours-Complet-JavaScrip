<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2. Les Événements en JavaScript</title>
    <style>
        :root {
            --primary: #1a73e8;
            --secondary: #f8f9fa;
            --text: #333;
            --code-bg: #f4f4f4;
            --border: #ddd;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: #fff;
        }
        header {
            background-color: var(--primary);
            color: white;
            padding: 1.5rem 0;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        header h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        nav {
            background-color: #fff;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 1rem 0;
        }
        nav li {
            margin: 0 1rem;
        }
        nav a {
            text-decoration: none;
            color: var(--primary);
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        nav a:hover, nav a.active {
            background-color: var(--primary);
            color: white;
        }
        main {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        section {
            margin-bottom: 3rem;
            padding: 1.5rem;
            background-color: var(--secondary);
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        h2 {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }
        h3 {
            color: #1a73e8;
            margin: 1.5rem 0 1rem;
            font-size: 1.4rem;
        }
        p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }
        li {
            margin-bottom: 0.5rem;
        }
        pre {
            background-color: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        code {
            font-family: 'Courier New', monospace;
            color: #d63384;
        }
        .example, .exercise {
            background-color: white;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0 4px 4px 0;
        }
        .example h4, .exercise h4 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        .solution {
            background-color: #e8f5e8;
            border-left: 4px solid #4caf50;
            margin-top: 1rem;
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                align-items: center;
            }
            nav li {
                margin: 0.5rem 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Module 2 : Les Événements en JavaScript</h1>
        <p>Gestion des interactions utilisateur</p>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Accueil</a></li>
            <li><a href="dom.html">1. Le DOM</a></li>
            <li><a href="evenements.html" class="active">2. Les Événements</a></li>
            <li><a href="fonctions.html">3. Les Fonctions</a></li>
            <li><a href="modules-classes.html">4. Modules & Classes</a></li>
            <li><a href="nodejs.html">5. Node.js</a></li>
            <li><a href="react.html">6. React</a></li>
        </ul>
    </nav>

    <main>
        <section>
            <h2>1. Introduction aux Événements</h2>
            <p>Les événements JavaScript permettent de détecter et de réagir aux actions de l'utilisateur (clics, saisie, mouvement de souris) ou aux changements d'état du document (chargement, redimensionnement).</p>
            
            <h3>Cycle de Vie d'un Événement</h3>
            <ol>
                <li><strong>Capture</strong> : Phase descendante (de document vers cible)</li>
                <li><strong>Cible</strong> : L'élément qui a déclenché l'événement</li>
                <li><strong>Bubbling</strong> : Phase remontante (de cible vers document)</li>
            </ol>
            
            <pre><code>// Schéma du cycle
document
  └── div (capture)
      └── button (cible) ← Événement déclenché
      └── div (bubbling)
  └── document</code></pre>
        </section>

        <section>
            <h2>2. Gestionnaires d'Événements</h2>
            
            <h3>Méthodes d'Attachement</h3>
            <ul>
                <li><code>element.addEventListener(type, fonction)</code> : Méthode moderne (recommandée)</li>
                <li><code>element.removeEventListener(type, fonction)</code> : Supprimer un écouteur</li>
                <li><code>element.onclick = fonction</code> : Propriété directe (limité à un écouteur)</li>
            </ul>
            
            <pre><code>// addEventListener (préféré)
button.addEventListener('click', handleClick);
button.addEventListener('click', autreFonction);

// Suppression
button.removeEventListener('click', handleClick);

// Propriété directe
button.onclick = function() {
    console.log('Clic !');
};</code></pre>
        </section>

        <section>
            <h2>3. L'Objet Event</h2>
            <p>L'objet <code>event</code> (ou <code>e</code>) est passé automatiquement à la fonction gestionnaire et contient des informations sur l'événement.</p>
            
            <h3>Propriétés Principales</h3>
            <ul>
                <li><code>event.target</code> : Élément qui a déclenché l'événement</li>
                <li><code>event.currentTarget</code> : Élément auquel l'écouteur est attaché</li>
                <li><code>event.type</code> : Type d'événement ('click', 'keydown', etc.)</li>
                <li><code>event.preventDefault()</code> : Empêcher le comportement par défaut</li>
                <li><code>event.stopPropagation()</code> : Arrêter la propagation</li>
            </ul>
            
            <pre><code>document.addEventListener('click', (e) => {
    console.log('Cible:', e.target);
    console.log('Élément courant:', e.currentTarget);
    console.log('Type:', e.type);
    
    e.preventDefault(); // Empêche action par défaut
    e.stopPropagation(); // Arrête la propagation
});</code></pre>
        </section>

        <section>
            <h2>4. Types d'Événements Courants</h2>
            
            <h3>Événements de Souris</h3>
            <ul>
                <li><code>click</code> : Clic gauche</li>
                <li><code>dblclick</code> : Double-clic</li>
                <li><code>mousedown</code> / <code>mouseup</code> : Appui/relâchement</li>
                <li><code>mousemove</code> : Mouvement de la souris</li>
                <li><code>mouseenter</code> / <code>mouseleave</code> : Survol sans bubbling</li>
            </ul>
            
            <h3>Événements Clavier</h3>
            <ul>
                <li><code>keydown</code> : Touche enfoncée</li>
                <li><code>keyup</code> : Touche relâchée</li>
                <li><code>keypress</code> : Touche pressée (déprécié)</li>
            </ul>
            
            <h3>Événements de Formulaire</h3>
            <ul>
                <li><code>submit</code> : Soumission de formulaire</li>
                <li><code>change</code> : Changement de valeur (après perte de focus)</li>
                <li><code>input</code> : Changement en temps réel</li>
                <li><code>focus</code> / <code>blur</code> : Gain/perte de focus</li>
            </ul>
            
            <h3>Événements de Document/Fenêtre</h3>
            <ul>
                <li><code>DOMContentLoaded</code> : DOM chargé</li>
                <li><code>load</code> : Page entièrement chargée</li>
                <li><code>resize</code> : Redimensionnement fenêtre</li>
                <li><code>scroll</code> : Défilement</li>
            </ul>
        </section>

        <section>
            <h2>5. Délégation d'Événements</h2>
            <p>Technique consistant à attacher un écouteur à un parent pour gérer les événements de ses enfants, même ajoutés dynamiquement.</p>
            
            <pre><code>// Délégation sur une liste
document.getElementById('liste').addEventListener('click', (e) => {
    if (e.target.matches('.supprimer')) {
        e.target.parentElement.remove();
    }
});

// Avantages : 
// - Gère éléments ajoutés dynamiquement
// - Moins d'écouteurs mémoire
// - Code centralisé</code></pre>
        </section>

        <section>
            <h2>Exemples Complets</h2>
            
            <div class="example">
                <h4>Exemple 1 : Jeu du Clic Rapide</h4>
                <p><strong>Problème</strong> : Créer un jeu où des cibles apparaissent aléatoirement et doivent être cliquées dans un temps limité.</p>
                <p><strong>Logique</strong> :
                    1. Générer cibles à intervalles
                    2. Compter les clics valides
                    3. Gérer timer et fin de partie
                    4. Afficher score
                </p>
                
                <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Jeu du Clic&lt;/title&gt;
    &lt;style&gt;
        #game { position: relative; width: 600px; height: 400px; border: 2px solid #333; margin: 20px auto; overflow: hidden; }
        .target { position: absolute; width: 50px; height: 50px; background: red; border-radius: 50%; cursor: pointer; }
        #score, #timer { text-align: center; font-size: 1.5em; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Jeu du Clic Rapide&lt;/h1&gt;
    &lt;div id="score"&gt;Score: 0&lt;/div&gt;
    &lt;div id="timer"&gt;Temps: 30&lt;/div&gt;
    &lt;div id="game"&gt;&lt;/div&gt;
    &lt;button id="start"&gt;Démarrer&lt;/button&gt;

    &lt;script&gt;
        const game = document.getElementById('game');
        const scoreEl = document.getElementById('score');
        const timerEl = document.getElementById('timer');
        const startBtn = document.getElementById('start');
        
        let score = 0;
        let temps = 30;
        let interval, cibleInterval;
        let enCours = false;

        function creerCible() {
            const cible = document.createElement('div');
            cible.className = 'target';
            
            // Position aléatoire
            const maxX = game.clientWidth - 50;
            const maxY = game.clientHeight - 50;
            cible.style.left = Math.random() * maxX + 'px';
            cible.style.top = Math.random() * maxY + 'px';
            
            // Suppression après 2s
            setTimeout(() => cible.remove(), 2000);
            
            cible.addEventListener('click', () => {
                score++;
                scoreEl.textContent = `Score: ${score}`;
                cible.remove();
            });
            
            game.appendChild(cible);
        }

        function demarrerJeu() {
            if (enCours) return;
            enCours = true;
            score = 0;
            temps = 30;
            scoreEl.textContent = 'Score: 0';
            startBtn.disabled = true;
            
            // Timer
            interval = setInterval(() => {
                temps--;
                timerEl.textContent = `Temps: ${temps}`;
                if (temps <= 0) {
                    finJeu();
                }
            }, 1000);
            
            // Création cibles
            cibleInterval = setInterval(creerCible, 800);
        }

        function finJeu() {
            clearInterval(interval);
            clearInterval(cibleInterval);
            enCours = false;
            startBtn.disabled = false;
            alert(`Jeu terminé ! Score final: ${score}`);
            game.innerHTML = '';
        }

        startBtn.addEventListener('click', demarrerJeu);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                
                <p><strong>Résultat attendu</strong> : Zone de jeu avec cibles rouges apparaissant aléatoirement. Score incrémenté au clic. Timer 30s. Alerte avec score final à la fin.</p>
            </div>

            <div class="example">
                <h4>Exemple 2 : Formulaire avec Auto-complétion</h4>
                <p><strong>Problème</strong> : Créer un champ de recherche avec suggestions qui s'affichent en temps réel lors de la saisie.</p>
                <p><strong>Logique</strong> :
                    1. Tableau de données
                    2. Écouteur sur input
                    3. Filtrage des résultats
                    4. Affichage dynamique des suggestions
                </p>
                
                <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Auto-complétion&lt;/title&gt;
    &lt;style&gt;
        .search-container { max-width: 400px; margin: 50px auto; position: relative; }
        #search { width: 100%; padding: 10px; font-size: 1em; }
        .suggestions { position: absolute; width: 100%; background: white; border: 1px solid #ddd; max-height: 200px; overflow-y: auto; }
        .suggestion { padding: 10px; cursor: pointer; border-bottom: 1px solid #eee; }
        .suggestion:hover { background: #f0f0f0; }
        .suggestion.highlight { background: #e3f2fd; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="search-container"&gt;
        &lt;input type="text" id="search" placeholder="Rechercher une ville..."&gt;
        &lt;div id="suggestions" class="suggestions"&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;script&gt;
        const villes = ['Paris', 'Marseille', 'Lyon', 'Toulouse', 'Nice', 'Nantes', 'Strasbourg', 'Montpellier', 'Bordeaux', 'Lille'];
        const input = document.getElementById('search');
        const suggestions = document.getElementById('suggestions');

        input.addEventListener('input', () => {
            const terme = input.value.toLowerCase().trim();
            suggestions.innerHTML = '';
            
            if (!terme) {
                suggestions.style.display = 'none';
                return;
            }

            const resultats = villes.filter(ville => 
                ville.toLowerCase().includes(terme)
            );

            if (resultats.length === 0) {
                suggestions.innerHTML = '&lt;div class="suggestion"&gt;Aucun résultat&lt;/div&gt;';
                suggestions.style.display = 'block';
                return;
            }

            resultats.forEach(ville => {
                const div = document.createElement('div');
                div.className = 'suggestion';
                div.textContent = ville;
                
                // Survol
                div.addEventListener('mouseenter', () => {
                    document.querySelectorAll('.suggestion').forEach(s => 
                        s.classList.remove('highlight')
                    );
                    div.classList.add('highlight');
                });
                
                // Clic
                div.addEventListener('click', () => {
                    input.value = ville;
                    suggestions.innerHTML = '';
                    suggestions.style.display = 'none';
                });
                
                suggestions.appendChild(div);
            });
            
            suggestions.style.display = 'block';
        });

        // Fermer suggestions en cliquant ailleurs
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                suggestions.style.display = 'none';
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                
                <p><strong>Résultat attendu</strong> : Champ de recherche affichant suggestions filtrées en temps réel. Survol met en surbrillance. Clic sélectionne la ville. Suggestions se ferment en cliquant ailleurs.</p>
            </div>

            <div class="example">
                <h4>Exemple 3 : Drag & Drop de Tâches</h4>
                <p><strong>Problème</strong> : Créer un tableau Kanban simple avec colonnes où les tâches peuvent être déplacées par glisser-déposer.</p>
                <p><strong>Logique</strong> :
                    1. Structure avec colonnes
                    2. Événements drag HTML5
                    3. Gestion du déplacement
                    4. Persistance visuelle
                </p>
                
                <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Kanban Drag & Drop&lt;/title&gt;
    &lt;style&gt;
        .board { display: flex; gap: 20px; padding: 20px; }
        .column { flex: 1; background: #f0f0f0; padding: 10px; border-radius: 8px; min-height: 300px; }
        .column h3 { text-align: center; margin-bottom: 10px; }
        .task { background: white; padding: 10px; margin: 10px 0; border-radius: 4px; cursor: move; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .task.dragging { opacity: 0.5; }
        .column.drag-over { background: #bbdefb; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Tableau Kanban&lt;/h1&gt;
    &lt;div class="board"&gt;
        &lt;div class="column" id="todo"&gt;
            &lt;h3&gt;À faire&lt;/h3&gt;
            &lt;div class="task" draggable="true"&gt;Créer wireframe&lt;/div&gt;
            &lt;div class="task" draggable="true"&gt;Écrire documentation&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="column" id="doing"&gt;
            &lt;h3&gt;En cours&lt;/h3&gt;
            &lt;div class="task" draggable="true"&gt;Développer API&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="column" id="done"&gt;
            &lt;h3&gt;Terminé&lt;/h3&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script&gt;
        // Sélection de toutes les tâches
        document.querySelectorAll('.task').forEach(task => {
            task.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', task.outerHTML);
                task.classList.add('dragging');
                setTimeout(() => task.style.display = 'none', 0);
            });
            
            task.addEventListener('dragend', () => {
                task.classList.remove('dragging');
                task.style.display = 'block';
            });
        });

        // Gestion des colonnes
        document.querySelectorAll('.column').forEach(column => {
            column.addEventListener('dragover', (e) => {
                e.preventDefault();
                column.classList.add('drag-over');
            });
            
            column.addEventListener('dragleave', () => {
                column.classList.remove('drag-over');
            });
            
            column.addEventListener('drop', (e) => {
                e.preventDefault();
                column.classList.remove('drag-over');
                
                const data = e.dataTransfer.getData('text/plain');
                const temp = document.createElement('div');
                temp.innerHTML = data;
                const task = temp.firstChild;
                
                // Réattacher les événements drag
                task.addEventListener('dragstart', handleDragStart);
                task.addEventListener('dragend', handleDragEnd);
                
                column.appendChild(task);
            });
        });

        // Fonctions réutilisables pour événements
        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', this.outerHTML);
            this.classList.add('dragging');
            setTimeout(() => this.style.display = 'none', 0);
        }
        
        function handleDragEnd() {
            this.classList.remove('dragging');
            this.style.display = 'block';
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                
                <p><strong>Résultat attendu</strong> : Tableau avec 3 colonnes. Tâches déplaçables par glisser-déposer entre colonnes. Effets visuels pendant le drag (opacité, surbrillance colonne).</p>
            </div>
        </section>

        <section>
            <h2>Mini-Exercices</h2>
            
            <div class="exercise">
                <h4>Exercice 1 : Double Clic pour Changer Couleur</h4>
                <p><strong>Énoncé</strong> : Créez une div qui change de couleur à chaque double-clic (cycle entre 3 couleurs).</p>
                
                <div class="solution">
                    <p><strong>Démarche</strong> :
                        1. Tableau de couleurs
                        2. Index courant
                        3. Événement dblclick incrémente index
                        4. Applique couleur via style
                    </p>
                    
                    <pre><code>&lt;div id="box" style="width:200px; height:200px; background:red;"&gt;&lt;/div&gt;

&lt;script&gt;
    const box = document.getElementById('box');
    const couleurs = ['red', 'green', 'blue'];
    let index = 0;

    box.addEventListener('dblclick', () => {
        index = (index + 1) % couleurs.length;
        box.style.backgroundColor = couleurs[index];
    });
&lt;/script&gt;</code></pre>
                </div>
            </div>

            <div class="exercise">
                <h4>Exercice 2 : Compteur de Touches</h4>
                <p><strong>Énoncé</strong> : Affichez le nombre de touches pressées depuis le chargement et la dernière touche (code et caractère).</p>
                
                <div class="solution">
                    <p><strong>Démarche</strong> :
                        1. Compteur total
                        2. Écouteur keydown sur document
                        3. Mettre à jour affichage avec key et code
                    </p>
                    
                    <pre><code>&lt;p&gt;Touches pressées: &lt;span id="total"&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Dernière touche: &lt;span id="key"&gt;-&lt;/span&gt; (code: &lt;span id="code"&gt;-&lt;/span&gt;)&lt;/p&gt;

&lt;script&gt;
    let total = 0;
    const totalEl = document.getElementById('total');
    const keyEl = document.getElementById('key');
    const codeEl = document.getElementById('code');

    document.addEventListener('keydown', (e) => {
        total++;
        totalEl.textContent = total;
        keyEl.textContent = e.key;
        codeEl.textContent = e.code;
    });
&lt;/script&gt;</code></pre>
                </div>
            </div>

            <div class="exercise">
                <h4>Exercice 3 : Validation en Temps Réel</h4>
                <p><strong>Énoncé</strong> : Créez un champ mot de passe avec indicateur de force (faible/moyen/fort) mis à jour à chaque saisie.</p>
                
                <div class="solution">
                    <p><strong>Démarche</strong> :
                        1. Critères de force (longueur, chiffres, symboles)
                        2. Événement input
                        3. Calcul score et affichage
                    </p>
                    
                    <pre><code>&lt;label&gt;Mot de passe:&lt;/label&gt;
&lt;input type="password" id="pass"&gt;
&lt;p&gt;Force: &lt;span id="force"&gt;-&lt;/span&gt;&lt;/p&gt;

&lt;script&gt;
    const input = document.getElementById('pass');
    const forceEl = document.getElementById('force');

    input.addEventListener('input', () => {
        const mdp = input.value;
        let score = 0;
        
        if (mdp.length >= 8) score++;
        if (/\d/.test(mdp)) score++;
        if (/[a-z]/.test(mdp) && /[A-Z]/.test(mdp)) score++;
        if (/[^a-zA-Z0-9]/.test(mdp)) score++;
        
        let force = 'Faible';
        if (score >= 3) force = 'Fort';
        else if (score >= 2) force = 'Moyen';
        
        forceEl.textContent = force;
        forceEl.style.color = score >= 3 ? 'green' : score >= 2 ? 'orange' : 'red';
    });
&lt;/script&gt;</code></pre>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>Module 2 - Les Événements en JavaScript</p>
        <p><a href="index.html" style="color: white;">Retour à l'accueil</a></p>
    </footer>
</body>
</html>